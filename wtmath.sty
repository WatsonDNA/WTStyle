%
% wtmath.sty
%

%%%% package declaration
\NeedsTeXFormat{LaTeX2e}
\RequirePackage{wtbase}
\ProvidesPackage{wtmath}
\def\wtmt@pkgname{wtmath}

%%%% error messages
\def\wtmt@warn{\PackageWarningNoLine\wtmt@pkgname}
\def\wtmt@error{\PackageError\wtmt@pkgname}

%%%% new dimen
\newdimen\wtmt@tempdima

%%%% options
\DeclareOption{prefix}{\def\wtbs@prefix{wt}}
\DeclareOption{noprefix}{\let\wtbs@prefix\@empty}
\ExecuteOptions{noprefix}
\ProcessOptions\relax

%%%% print
\def\wtmt@print@right#1{\relax\ifmmode\tag*{#1}\else\hfill#1\fi}

%%%% for setting
\wtbs@usercommand{relmiddle}{\wtmt@relmiddle}
\def\wtmt@relmiddle#1{\mathrel{}\middle#1\mathrel{}}
\wtbs@usercommand{mathbold}{\wtmt@mathbold}
\def\wtmt@mathbold#1{\text{\boldmath $#1$}}
\wtbs@usercommand{exchange}{\wtbs@exchange}

%%%% proof
\wtbs@usercommand{qed}{\wtmt@print@right\wtmt@halmos}
\wtbs@usercommand{halmos}{\wtmt@halmos}
\def\wtmt@halmos{\begingroup
  \wtbs@get@capital@height\wtmt@tempdima
  \rule[-.15\wtmt@tempdima]{.6\wtmt@tempdima}{1.2\wtmt@tempdima}%
  \endgroup}

%%%% sets
\wtbs@usercommand{bar}{\wtmt@bar}
\def\wtmt@bar#1{\begingroup
  \wtbs@get@capital@height\wtmt@tempdima
  \overline{#1\rule{0pt}{\wtmt@tempdima}}
  \endgroup}

%% EOF
